{% capture _workspace %}
  {% assign nodes = include.html | split: '<blockquote>' %}

  {% capture edited_html %}{% endcapture %}

  {% for _node in nodes %}

    {% capture node %}{{ _node | strip }}{% endcapture %}

    {% increment block_count %}
    {% if block_count == 0 %}
      {% capture edited_html %}{{ edited_html }}{{ node }}{% endcapture %}
      {% continue %}
    {% endif %}

    {% if node == '' %}
      {% continue %}
    {% endif %}

    {% capture new_node %}<blockquote>{{ node }}{% endcapture %}

    {% capture alert_note %}<blockquote class="alert note"><p class="alert note"><img src="{{ include.baseUrl }}/assets/octicons/info.svg">Note</p><p>{% endcapture %}
    {% assign new_node = new_node | replace: '<blockquote><p>[!NOTE]<br />', alert_note %}
    {% assign new_node = new_node | replace: '<blockquote><p>[!NOTE]', alert_note %}

    {% capture alert_warning %}<blockquote class="alert warming"><p class="alert warming"><img src="{{ include.baseUrl }}/assets/octicons/warning.svg">Warning</p><p>{% endcapture %}
    {% assign new_node = new_node | replace: '<blockquote><p>[!WARNING]<br />', alert_warning %}
    {% assign new_node = new_node | replace: '<blockquote><p>[!WARNING]', alert_warning %}

    {% capture edited_html %}{{ edited_html }}{{ new_node }}{% endcapture %}

  {% endfor %}
{% endcapture %}{% assign _workspace = '' %}{{ edited_html | strip }}
